(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(6635)}])},6635:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return b}});var r=o(5893),n=o(7294);let a=(e,t,o)=>{let r=[];for(let n=0;n<t;n++){let t=[];for(let r=0;r<e;r++)t.push(o);r.push(t)}return r},l=[{type:1,shape:[[0,1,1],[0,1,1],[0,0,0]]},{type:2,shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]},{type:3,shape:[[0,1,0],[1,1,1],[0,0,0]]},{type:4,shape:[[0,0,1],[1,1,1],[0,0,0]]},{type:5,shape:[[1,0,0],[1,1,1],[0,0,0]]},{type:6,shape:[[0,1,1],[1,1,0],[0,0,0]]},{type:7,shape:[[1,1,0],[0,1,1],[0,0,0]]}],s=(e,t)=>{let o=e.length,r=4-(t/90%4+4)%4,n=[...e];for(let e=0;e<r;e++)n=n[0].map((e,t)=>n.map(e=>e[o-t-1]));return n},i=()=>{let[e,t]=(0,n.useState)(Date.now()),[o,r]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let t=setTimeout(()=>{r(Math.floor((Date.now()-e)/1e3))},1e3);return()=>clearTimeout(t)},[o,e]),o},c=()=>{let[e,t]=(0,n.useState)(a(10,24,0)),[o,r]=(0,n.useState)({...l[0],startTurn:0,position:{top:1,left:3},rotate:0}),c=i(),p=(0,n.useMemo)(()=>c-o.startTurn+o.position.top,[o,c]),u=(0,n.useMemo)(()=>{let t=e.filter(e=>e.some(e=>0===e));return t.length<24&&(t=a(10,24-t.length,0).concat(t)),console.table(t),t},[e]),_=(0,n.useMemo)(()=>{let t=[];return e.forEach((e,o)=>{e.every(e=>e>0)&&t.push(o)}),t},[e]),f=(0,n.useCallback)(e=>{let t=_.filter(t=>t>e).length;return e-t-(_.includes(e)?1:0)},[_]),d=(0,n.useMemo)(()=>{let e=a(10,21,0).map((e,t)=>e.map((e,o)=>u[t+3][o])),t=o.shape.length;for(let r=0;r<t**2;r++){let n=r%t,a=Math.floor(r/t);void 0===e[a+p]||e[a+p][n+o.position.left]||(e[a+p][n+o.position.left]=s(o.shape,o.rotate)[a][n]*o.type)}return e},[u,o,p]),h=(0,n.useCallback)((e,t)=>{let r=s(o.shape,o.rotate),n=r.map((o,n)=>o.map((o,a)=>{let l=[1===r[n][a],void 0!==r[n+t]&&1===r[n+t][a+e]];return l.every(e=>e)||!r[n][a]?0:1}));return n.map((r,n)=>r.filter((r,a)=>{if(0!==r){let r=[void 0===u[n+p+t+3],void 0!==u[n+p+t+3]&&0!==u[n+p+t+3][a+o.position.left+e]];return r.some(Boolean)}})).every(e=>!e.length)},[o,u,p]),v=(0,n.useCallback)(()=>{let r=o.shape.length,n=s(o.shape,o.rotate),a=[...e];for(let e=0;e<r**2;e++){let t=e%r,l=Math.floor(e/r);void 0!==a[f(l+p+3)]&&n[l][t]&&(a[f(l+p+3)][t+o.position.left]=o.type)}t(a)},[o,e,p,f]);return(0,n.useEffect)(()=>{let e=()=>{h(0,1)||(r({...l[o.type%7],position:{top:1,left:3},startTurn:c,rotate:0}),v())};e();let t=t=>{var n;let a=(e,t)=>{r({...o,position:{top:o.position.top+t,left:o.position.left+e}})};e();let l={ArrowRight:()=>{h(1,0)&&a(1,0)},ArrowLeft:()=>{h(-1,0)&&a(-1,0)},ArrowDown:()=>{h(0,1)&&a(0,1)},ArrowUp:()=>{r({...o,rotate:o.rotate+90})}};null===(n=l[t.key])||void 0===n||n.call(l)};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[o,h,v,c]),{board:d,floatingBlock:o}};var p=o(6619),u=o.n(p);let _=()=>{let{board:e}=c();return(0,r.jsx)("div",{className:u().board,children:e.map((t,o)=>t.map((t,n)=>(0,r.jsx)("div",{className:"".concat(u().cell," ").concat(u()["color-".concat(e[o][n])])},"".concat(n,"_").concat(o))))})};var f=o(6542),d=o.n(f);let h=()=>(0,r.jsx)("div",{className:d().hover});var v=o(1642),m=o.n(v);let x=()=>(0,r.jsx)("div",{className:m().information});var w=o(8042),y=o.n(w);let N=()=>(0,r.jsx)("div",{className:y().next});var k=o(2729),j=o.n(k);let B=()=>(0,r.jsxs)("div",{className:j().container,children:[(0,r.jsx)(h,{}),(0,r.jsx)(x,{}),(0,r.jsx)(_,{}),(0,r.jsx)(N,{})]});var b=B},6619:function(e){e.exports={board:"Board_board__O2hAA",cell:"Board_cell__peFpG","color-1":"Board_color-1__IwXYC","color-2":"Board_color-2__CIi8b","color-3":"Board_color-3__RkO8c","color-4":"Board_color-4__jYUkj","color-5":"Board_color-5__04rYI","color-6":"Board_color-6__axP73","color-7":"Board_color-7__s1OS7","color-0":"Board_color-0__0k18d"}},6542:function(e){e.exports={hover:"Hover_hover__58yN1"}},1642:function(e){e.exports={information:"Information_information__cadY9"}},8042:function(e){e.exports={next:"Next_next__zAIzZ"}},2729:function(e){e.exports={container:"index_container__gnN1f"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);