(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(6635)}])},6635:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return E}});var r=o(5893),n=o(7294);let a=(e,t,o)=>{let r=[];for(let n=0;n<t;n++){let t=[];for(let r=0;r<e;r++)t.push(o);r.push(t)}return r},l=[{type:1,shape:[[0,1,1],[0,1,1],[0,0,0]]},{type:2,shape:[[0,0,0,1],[1,1,1,1],[0,0,0,1],[0,0,0,1]]},{type:3,shape:[[0,1,0],[1,1,1],[0,0,0]]},{type:4,shape:[[0,0,1],[1,1,1],[0,0,0]]},{type:5,shape:[[1,0,0],[1,1,1],[0,0,0]]},{type:6,shape:[[0,1,1],[1,1,0],[0,0,0]]},{type:7,shape:[[1,1,0],[0,1,1],[0,0,0]]}],s=(e,t)=>{let o=e.length,r=3-(t/90%4+4)%4,n=[...e];for(let e=0;e<r;e++)n=n[0].map((e,t)=>n.map(e=>e[o-t-1]));return n},i=()=>{let[e,t]=(0,n.useState)(Date.now()),[o,r]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let t=setTimeout(()=>{r(Math.floor((Date.now()-e)/1e3))},1e3);return()=>clearTimeout(t)},[o,e]),o},c=()=>{let[e,t]=(0,n.useState)(a(10,24,0)),[o,r]=(0,n.useState)({...l[0],startTurn:0,position:{top:1,left:3},rotate:0}),c=i(),p=(0,n.useMemo)(()=>c-o.startTurn+o.position.top,[o,c]),_=(0,n.useMemo)(()=>{let t=a(10,21,0).map((t,o)=>t.map((t,r)=>e[o+3][r])),r=o.shape.length;for(let e=0;e<r**2;e++){let n=e%r,a=Math.floor(e/r);void 0===t[a+p]||t[a+p][n+o.position.left]||(t[a+p][n+o.position.left]=s(o.shape,o.rotate)[a][n]*o.type)}return t},[e,o,p]),u=(0,n.useCallback)((t,r)=>{let n=s(o.shape,o.rotate),a=n.map((e,o)=>e.map((e,a)=>{let l=[1===n[o][a],void 0!==n[o+r]&&1===n[o+r][a+t]];return l.every(e=>e)||!n[o][a]?0:1}));return a.map((n,a)=>n.filter((n,l)=>{if(0!==n){let n=[void 0===e[a+p+r+3],void 0!==e[a+p+r+3]&&0!==e[a+p+r+3][l+o.position.left+t]];return n.some(e=>e)}})).every(e=>!e.length)},[o,e,p]),f=(0,n.useCallback)(()=>{let r=o.shape.length,n=s(o.shape,o.rotate),a=[...e];for(let e=0;e<r**2;e++){let t=e%r,l=Math.floor(e/r);void 0!==a[l+p+3]&&n[l][t]&&(a[l+p+3][t+o.position.left]=o.type)}t(a)},[o,e,p]);return(0,n.useEffect)(()=>{let e=()=>{u(0,1)||(r({...l[o.type%7],position:{top:1,left:3},startTurn:c,rotate:0}),f())};e();let t=t=>{let n=(e,t)=>{r({...o,position:{top:o.position.top+t,left:o.position.left+e}})};e(),"ArrowRight"===t.key&&u(1,0)&&n(1,0),"ArrowLeft"===t.key&&u(-1,0)&&n(-1,0),"ArrowDown"===t.key&&u(0,1)&&n(0,1),"ArrowUp"===t.key&&u(0,-1)&&r({...o,rotate:o.rotate+90})};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[o,u,f,c]),{board:_,floatingBlock:o}};var p=o(6619),_=o.n(p);let u=()=>{let{board:e}=c();return(0,r.jsx)("div",{className:_().board,children:e.map((t,o)=>t.map((t,n)=>(0,r.jsx)("div",{className:"".concat(_().cell," ").concat(_()["color-".concat(e[o][n])])},"".concat(n,"_").concat(o))))})};var f=o(6542),d=o.n(f);let h=()=>(0,r.jsx)("div",{className:d().hover});var v=o(1642),m=o.n(v);let x=()=>(0,r.jsx)("div",{className:m().information});var w=o(8042),y=o.n(w);let k=()=>(0,r.jsx)("div",{className:y().next});var N=o(2729),j=o.n(N);let B=()=>(0,r.jsxs)("div",{className:j().container,children:[(0,r.jsx)(h,{}),(0,r.jsx)(x,{}),(0,r.jsx)(u,{}),(0,r.jsx)(k,{})]});var E=B},6619:function(e){e.exports={board:"Board_board__O2hAA",cell:"Board_cell__peFpG","color-1":"Board_color-1__IwXYC","color-2":"Board_color-2__CIi8b","color-3":"Board_color-3__RkO8c","color-4":"Board_color-4__jYUkj","color-5":"Board_color-5__04rYI","color-6":"Board_color-6__axP73","color-7":"Board_color-7__s1OS7","color-0":"Board_color-0__0k18d"}},6542:function(e){e.exports={hover:"Hover_hover__58yN1"}},1642:function(e){e.exports={information:"Information_information__cadY9"}},8042:function(e){e.exports={next:"Next_next__zAIzZ"}},2729:function(e){e.exports={container:"index_container__gnN1f"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);